<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promotion Guide</title>
    <link rel="icon" type="image/png" href="images/COA.png">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #b3c7fc;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: #004080;
            color: #ffffff;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative; 
        }

        header img {
            height: 100px;            
        }
        .profile-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-left: 20px;
        gap: 10px;
    }

    .profile-pic {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        border: 3px solid #fff;
        margin-bottom: 5px;
    }

    .user-info {
        color: #fff;
        text-align: center;
        font-size: 14px;
        line-height: 1.2;
    }

    nav h1 {
            color: #ffffff;
            margin: 0;
            font-size: 30px;
            flex-grow: 1;
            text-align: left;
        }

        nav {
            display: flex;
            justify-content: left;
            background-color: #003366;
            padding: 10px;
        }

        nav a {
            color: #ffffff;
            text-decoration: none;
            padding: 10px 20px;
            margin: 0 10px;
            font-size: 18px;
            border-radius: 5px;
        }

        nav a:hover {
            background-color: #005bb5;
        }

        .main-content {
            display: flex;
            flex: 1;
        }

        .container {
            width: 60%;
            margin: 20px auto;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .question {
            margin-bottom: 20px;
        }

        .navigation-buttons button {
            padding: 10px 15px;
            margin: 5px;
            background-color: #004080;
            color: #ffffff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .navigation-buttons button:hover {
            background-color: #003366;
        }

        footer {
            background-color: #003366;
            color: #ffffff;
            text-align: center;
            padding: 15px;
            width: 100%;
        }

        #timer {
            font-size: 18px;
            color: white;
        }

        /* Score Pop-up Styles */
        .score-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 500px;
            padding: 30px;
            background: #f0faff;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
            border: 3px solid #004080;
            animation: popIn 0.3s ease-out;
        }

        .score-popup h2 {
            color: #004080;
            font-size: 28px;
            margin-bottom: 15px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .score-popup p {
            font-size: 20px;
            margin: 15px 0;
            color: #333;
            font-weight: 600;
        }

        .score-popup .percentage {
            font-size: 42px;
            font-weight: 800;
            color: #004080;
            margin: 20px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .score-popup .result-message {
            font-size: 22px;
            font-weight: 700;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .pass {
            background: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #2e7d32;
        }

        .fail {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #c62828;
        }

        #close-popup {
            background: #004080;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        #close-popup:hover {
            background: #003366;
            transform: scale(1.05);
        }

        /* Animation */
        @keyframes popIn {
            from {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

      .failed-questions {
            margin: 20px 0;
            text-align: left;
            width: 100%;
        }

        .failed-questions h3 {
            color: #c62828;
            margin-bottom: 10px;
            font-size: 18px;
        }

        #failed-questions-list {
            max-height: 150px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin: 0 auto;
            width: 90%;
        }

        #failed-questions-list li {
            padding: 8px;
            margin: 5px 0;
            background-color: #ffebee;
            border-left: 4px solid #c62828;
            list-style-type: none;
            font-size: 14px;
        }

        #failed-questions-list li:nth-child(even) {
            background-color: #fce4ec;
        }

        .no-failed {
            color: #2e7d32;
            font-style: italic;
        }

        /* Question Navigation Panel */
        .question-nav-panel {
            width: 30%;
            background-color: #f0f0f0;
            padding: 20px;
            border-left: 1px solid #ddd;
            height: calc(100vh - 200px);
            overflow-y: auto;
            position: sticky;
            top: 0;
        }

        .question-nav-panel h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #004080;
        }

        .question-buttons {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 10px;
        }

        .question-btn {
            width: 100%;
            padding: 8px 0;
            background-color: #004080; /* Blue for unanswered */
            color: white;
            border: 1px solid #003366;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .question-btn:hover {
            background-color: #005bb5;
            transform: scale(1.05);
        }

        .question-btn.current {
            background-color: #004080;
            color: white;
            font-weight: bold;
            box-shadow: 0 0 0 2px white, 0 0 0 4px #004080;
        }

        .question-btn.answered-correct {
            background-color: #4CAF50; /* Green for correct */
            border-color: #388E3C;
        }

        .question-btn.answered-wrong {
            background-color: #f44336; /* Red for wrong */
            border-color: #d32f2f;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            .container {
                width: 90%;
            }
            .question-nav-panel {
                width: 100%;
                height: auto;
                border-left: none;
                border-top: 1px solid #ddd;
                order: -1;
            }
            .question-buttons {
                grid-template-columns: repeat(10, 1fr);
            }
        }
    </style>
</head>
<body>

    <header>
      <div class="profile-container">
        <img src="images/profile.jpeg" alt="Profile Picture" class="profile-pic">
        <div class="user-info">Mr. Promotion Exam<br>ID: FCT/12345</div>
    </div>
    <nav><a href="common_services.html">Home</a> </nav> 
    </header>
    
    <nav>
        <h1>Legal 02</h1>
        <h3 id="timer">Time Remaining: 34:00</h3>
        <a href=""></a>
        <a href=""></a>
        <a href=""></a>
        <a href=""></a>
        <a href=""></a>
    </nav>

    <div class="main-content">
        <div class="container">
            <div id="question-container" class="question">
                <p id="question-text"></p>
                <div id="options-container"></div>
            </div>
        
            <div class="navigation-buttons">
                <button id="previous-button" onclick="previousQuestion()"><strong>Previous</strong></button>
                <button id="next-button" onclick="nextQuestion()"><strong>Next</strong></button>
                <button id="submit-button" onclick="submitExam()"><strong>Submit Exam</strong></button>
            </div>
        
            <div id="result" style="display: none; margin-top: 20px; font-size: 20px; color: green;"></div>
        </div>
        
        <!-- Question Navigation Panel -->
        <div class="question-nav-panel">
            <h3>Questions</h3>
            <div class="question-buttons" id="question-buttons">
                <!-- Question buttons will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <div class="overlay" id="overlay" style="display: none;"></div>
    <div class="score-popup" id="score-popup" style="display: none;">
        <h2>Exam Results</h2>
        <p>Total Questions: <span id="total-questions"></span></p>
        <p>Total Scores: <span id="correct-answers"></span></p>
        <div class="percentage" id="percentage"></div>
        <div class="result-message" id="result-message"></div>
        <!-- Add Failed Questions Section -->
        <div class="failed-questions">
            <h3>Failed Questions:</h3>
            <ul id="failed-questions-list"></ul>
        </div>
        <button id="close-popup">Close</button>
    </div>

<footer>
    <p>&copy; 2024 HM Solutions & Co. | All Rights Reserved</p>
</footer>

<script>
    // Add this shuffle function at the beginning of your script
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}
    const questions = [
            {question: "The legal unit's 'legal hold' directive requires employees to:", options: ["Stop working", "Preserve all documents related to a potential litigation", "Delete all emails", "Hold onto their desks"], answer: "b"},
            {question: "A 'deed of variation' is used to:", options: ["Vary the species of birds in a park", "Formally amend a signed contract", "Change a employee's job title", "Alter the building's architecture"], answer: "b"},
            {question: "The legal unit's review of a marketing campaign should ensure it does not constitute:", options: ["Political advertising or defamation", "Effective communication", "A use of social media", "A catchy slogan"], answer: "a"},
            {question: "What is the PRIMARY purpose of the legal unit developing internal policies and guidelines for staff?", options: ["To create unnecessary paperwork", "To translate complex laws into clear, actionable procedures for employees", "To restrict employee creativity", "To reduce the need for legal training"], answer: "b"},
            {question: "A new public servant joins the agency. Who is MOST responsible for ensuring they receive training on the code of conduct and ethics?", options: ["The legal unit, in coordination with HR", "The public servant themselves", "The office cleaner", "The minister's chief of staff"], answer: "a"},
            {question: "The legal unit runs a seminar on 'Identifying and Managing Conflicts of Interest.' This is an example of:", options: ["Proactive risk management and capacity building", "A waste of resources", "An attempt to take over HR's job", "A social event"], answer: "a"},
            {question: "An employee is offered a gift basket from a contractor whose bid is under evaluation. They should:", options: ["Accept it and share it with the team", "Refuse it and report the offer to their supervisor or ethics officer", "Accept it but promise to be fair", "Ask for a more expensive gift"], answer: "b"},
            {question: "A 'whistleblower' is someone who:", options: ["Uses a whistle at sporting events", "Reports wrongdoing, malpractice, or corruption within an organization", "Is always an external complainant", "Should be ignored"], answer: "b"},
            {question: "The legal unit advises on strong whistleblower protections to:", options: ["Encourage false reports", "Encourage the reporting of misconduct without fear of retaliation", "Create a culture of fear", "Generate more work for investigators"], answer: "b"},
            {question: "A data protection impact assessment (DPIA) is conducted to:", options: ["Identify and minimize data protection risks of a new project", "Find new ways to sell citizen data", "Delay project implementation", "Satisfy a personal curiosity of the legal unit"], answer: "a"},
            {question: "The legal unit's role in a 'legal risk audit' is to:", options: ["Audit financial statements", "Find reasons to fire staff", "Proactively identify areas where the agency might be exposed to legal challenges", "Check the structural integrity of the building"], answer: "c"},
            {question: "A public servant's private business could create a conflict of interest if it:", options: ["Is very successful", "Is located in another city", "Provides goods or services that the agency might procure", "Has a funny name"], answer: "c"},
            {question: "The legal principle of 'procedural fairness' in administrative decisions requires:", options: ["The decision-maker to be biased", "Making the decision as quickly as possible", "Giving the person affected a fair hearing and an unbiased decision-maker", "Always ruling in favor of the citizen"], answer: "c"},
            {question: "If an agency promises to follow a certain procedure, it may create a 'legitimate expectation.' This means the agency:", options: ["Can ignore its own promise", "Is allowed to break the promise if it's inconvenient", "Should generally act consistently with that promise or provide a good reason for not doing so", "Must get a court's permission for any action"], answer: "c"},
            {question: "A regulatory penalty is 'proportionate' if it is:", options: ["The maximum possible by law", "The same for every single offense", "Appropriate and not excessive to the seriousness of the breach", "Determined by a public vote"], answer: "c"},
            {question: "The legal unit ensures new regulations are 'intra vires,' meaning they are:", options: ["Written in clear language", "Extremely detailed", "Within the scope of power granted by the parent Act of Parliament", "Pleased everyone in the department"], answer: "c"},
            {question: "When scrutinizing a proposed bill, the legal unit's analysis focuses on its consistency with:", options: ["The minister's speechwriters' preferences", "The latest fashion trends", "The national constitution and human rights standards", "The price of paper"], answer: "c"},
            {question: "Liaising with the Attorney-General's office helps ensure the agency's actions are:", options: ["Kept secret from other departments", "More expensive", "Aligned with whole-of-government legal policy", "Politicized"], answer: "c"},
            {question: "A key advantage of the in-house legal unit over an external firm is its:", options: ["Lower hourly rates", "Ability to ignore deadlines", "Deeper understanding of the agency's operations and public law context", "Lack of oversight"], answer: "c"},
            {question: "When faced with a novel legal question, the legal unit's advice should be based on:", options: ["A guess", "The opinion of the last person they spoke to", "Research into case law, statutes, and legal principles", "The alignment of the stars"], answer: "c"},
            {question: "'Legal professional privilege' protects communications between a lawyer and client made for the purpose of:", options: ["Gossiping", "Planning a party", "Seeking or giving legal advice", "Discussing the weather"], answer: "c"},
            {question: "The legal unit's independence is vital because it ensures advice is based on:", options: ["What is politically popular", "An objective assessment of the law, not a desire to please superiors", "The personal interests of the lawyers", "The budget for the quarter"], answer: "c"},
            {question: "The ultimate goal of the legal unit's compliance work is to:", options: ["Create a culture of fear", "Generate as many policies as possible", "Uphold the rule of law and enable effective, lawful administration", "Win awards"], answer: "c"},
            {question: "An ombudsman's report criticizes an agency's procedure. The legal unit should:", options: ["Ignore it", "Attack the ombudsman's credibility", "Review the findings and advise on necessary procedural improvements", "Disband the involved department"], answer: "c"},
            {question: "The legal unit reviews a Memorandum of Understanding (MoU) to determine if it:", options: ["Uses nice paper", "Is too long", "Creates legally binding obligations or is merely a statement of intent", "Has the right signatures"], answer: "c"},
            {question: "An employee receives a subpoena for official documents. They must:", options: ["Destroy the documents", "Send the documents directly to the requester", "Contact the legal unit immediately for guidance on compliance", "Frame the subpoena"], answer: "c"},
            {question: "A sponsorship offer from a company might be problematic if it creates an obligation for the agency to:", options: ["Thank the company", "Use the company's logo", "Endorse the company's products, potentially compromising its independence", "Hold the event outdoors"], answer: "c"},
            {question: "A 'without prejudice' meeting is held to:", options: ["Discuss prejudice", "Plan a discrimination lawsuit", "Try to settle a dispute, with the discussions being inadmissible in court if it fails", "Exclude certain people"], answer: "c"},
            {question: "The legal unit manages external lawyers by:", options: ["Giving them unlimited funds", "Letting them run the case entirely on their own", "Setting clear budgets, instructions, and reviewing their invoices and work", "Choosing the one with the fanciest office"], answer: "c"},
            {question: "A 'subject access request' from a citizen seeking their personal data is handled by the legal unit to ensure the response complies with:", options: ["The agency's whims", "The time it takes to print", "Data protection law and its exemptions", "The citizen's tone of voice"], answer: "c"},
            {question: "On a project risk register, the legal unit's primary contribution is identifying:", options: ["Technical failures", "Legal, regulatory, and judicial review risks", "Catering options", "Color schemes"], answer: "b"},
            {question: "If an agency fails to follow its own published guidance, a court will likely view this as:", options: ["A sign of efficiency", "A procedural flaw that could make the decision unlawful", "A minor typo", "An innovative approach"], answer: "b"},
            {question: "A public consultation is 'meaningful' if it:", options: ["Is held in a big room", "Genuinely considers public feedback before making a final decision", "Uses an online platform", "Has a high attendance"], answer: "b"},
            {question: "The legal unit's key role in a procurement challenge is to:", options: ["Admit fault immediately", "Review the process for legality and prepare a robust defense", "Pressure the evaluators to change the result", "Blame the lowest bidder"], answer: "b"},
            {question: "The legal unit advises that an appeal has a 'low chance of success.' This assessment is based on:", options: ["A feeling", "A reasoned analysis of the legal arguments and precedent", "The judge's reputation", "The time of year"], answer: "b"},
            {question: "In a mediation, the legal unit's role is to:", options: ["Act as the neutral mediator", "Advise their client on settlement options and negotiate on their behalf", "Make the final decision", "Provide therapy"], answer: "b"},
            {question: "A 'legal hold' is an instruction to employees to:", options: ["Stop all work", "Preserve all documents and data related to a potential lawsuit", "Delete old files", "Hold onto their chairs"], answer: "b"},
            {question: "A 'deed of variation' is a legal document used to:", options: ["Vary the types of plants in a garden", "Formally amend an existing contract", "Change a person's name", "Alter a recipe"], answer: "b"},
            {question: "The legal unit should review a press release to ensure it does not constitute:", options: ["Effective communication", "Libel, defamation, or a breach of confidentiality", "A use of the agency's logo", "A short message"], answer: "b"},
            {question: "A 'standstill period' in procurement is designed to:", options: ["Delay projects unnecessarily", "Allow unsuccessful bidders to seek debriefing or challenge the award before it is finalized", "Let the winning bidder celebrate", "Give the procurement team a break"], answer: "b"},
            {question: "The legal unit's advice on a proposed policy that affects a minority group would heavily consider:", options: ["The policy's cost", "Equality and non-discrimination legislation", "The group's size", "The minister's personal views"], answer: "b"},
            {question: "An 'interagency agreement' is reviewed by the legal unit to ensure:", options: ["It uses the correct letterhead", "It clearly defines each agency's roles, responsibilities, and liabilities", "It is the shortest possible", "It favors their agency completely"], answer: "b"},
            {question: "The concept of 'separation of powers' means the legal unit ensures the executive agency does not:", options: ["Work efficiently", "Usurp the powers of the legislature or the judiciary", "Communicate with other branches", "Have its own legal advice"], answer: "b"},
            {question: "The legal unit promotes the use of Plain Language in contracts and communications to:", options: ["Make documents longer", "Ensure they are easily understood and minimize disputes", "Satisfy a personal preference", "Follow a fleeting trend"], answer: "b"},
            {question: "A 'value for money' assessment in a procurement is important to the legal unit because it helps demonstrate:", options: ["That the cheapest bid was chosen", "That the decision was rational and defensible against challenge", "That the process was quick", "The evaluators' personal tastes"], answer: "b"},
            {question: "The legal unit's involvement in a disciplinary process ensures it is:", options: ["Harsh and swift", "Conducted fairly and in accordance with employment law and natural justice", "Kept secret from the employee", "Based on rumors"], answer: "b"},
            {question: "A 'public interest' test might be applied when deciding whether to release information under FOI to weigh:", options: ["The applicant's identity", "The benefits of transparency against potential harms of disclosure", "The cost of photocopying", "The time of day"], answer: "b"},
            {question: "The legal unit advises that a decision may be 'ultra vires.' This means it was:", options: ["Very wise", "Taken beyond the legal power of the decision-maker", "Extremely popular", "Made in a virtual meeting"], answer: "b"},
            {question: "The legal unit's work in drafting subsidiary legislation requires it to be:", options: ["Vague and flexible", "Precise, clear, and within the scope of the parent Act", "As long as possible", "Written in technical jargon"], answer: "b"},
            {question: "When a new international treaty is ratified, the legal unit's role is to advise on:", options: ["The catering at the signing ceremony", "The steps needed to incorporate it into domestic law and agency practice", "The travel plans of diplomats", "The design of the treaty booklet"], answer: "b"},
            {question: "The legal unit's 'lessons learned' review after a lost court case aims to:", options: ["Find a scapegoat", "Improve future decision-making and processes to avoid repetition", "Blame the judge", "Hide the result"], answer: "b"},
            {question: "A key ethical duty of the legal unit itself is to maintain:", options: ["The agency's secrecy at all costs", "Client confidentiality and professional independence", "A large budget", "A strict dress code"], answer: "b"},
            {question: "What is the MOST important principle guiding the legal unit's advice to senior officials?", options: ["Independence and objectivity", "Ensuring the advice is what the officials want to hear", "Speed of delivery", "The potential for media coverage"], answer: "a"},
            {question: "The legal unit's duty to maintain 'client confidentiality' is primarily protected by:", options: ["The Freedom of Information Act", "Attorney-client privilege", "Office security protocols", "A verbal promise"], answer: "b"},
            {question: "A 'sober assessment of the law' requires the legal unit to provide advice that is:", options: ["Pessimistic", "Impartial and based on a rigorous legal analysis, not desired outcomes", "Given only in writing", "Approved by the finance department"], answer: "b"},
            {question: "The work of the legal unit is foundational to maintaining:", options: ["The largest possible workforce", "Public trust in government institutions and the rule of law", "The agency's social media presence", "A high budget for legal services"], answer: "b"},
            {question: "The principle that a government action must be appropriate and not excessive in relation to its goal is called:", options: ["Proportionality", "Popularity", "Precedent", "Power"], answer: "a"},
            {question: "If an agency has consistently granted permits in a certain way, it may create a 'legitimate expectation' that:", options: ["The agency can never change its mind", "The agency will continue to do so, or provide a good reason for a change", "The process is immune from review", "Applicants don't need to meet criteria"], answer: "b"},
            {question: "The legal unit ensures that all agency actions are 'intra vires,' meaning they are:", options: ["Done with good intentions", "Within the legal power granted to the agency", "Publicly popular", "Very forceful"], answer: "b"},
            {question: "When reviewing a proposed policy, the legal unit's analysis MUST include its consistency with:", options: ["The minister's favorite book", "The national constitution and international human rights standards", "The latest management trends", "The agency's holiday schedule"], answer: "b"},
            {question: "Liaising with the Attorney-General's office is crucial to ensure:", options: ["The agency operates in a legal silo", "Alignment with whole-of-government legal policy and coherence", "The AG handles all difficult problems", "The legal unit gets promoted"], answer: "b"},
            {question: "A key advantage of an in-house legal unit over an external firm is its:", options: ["Lower hourly rates", "Deep institutional knowledge and understanding of public law context", "Ability to avoid record-keeping", "Lack of external oversight"], answer: "b"},
            {question: "When faced with a novel legal issue, the legal unit's advice must be grounded in:", options: ["Speculation", "Research into case law, statutes, and fundamental legal principles", "The opinions of non-lawyers", "A single source"], answer: "b"},
            {question: "'Legal professional privilege' exists to protect:", options: ["All government documents", "Evidence of wrongdoing", "Budget discussions", "Confidential communications made for the purpose of seeking/giving legal advice"], answer: "d"},
            {question: "The legal unit's independence from operational departments allows it to:", options: ["Ignore operational realities", "Dictate policy", "Work in isolation", "Provide objective counsel that is not influenced by operational pressures"], answer: "d"},
            {question: "The ultimate purpose of the legal unit's work is to:", options: ["Generate profit", "Create work for itself", "Impress other lawyers", "Uphold the rule of law and enable effective, lawful public administration"], answer: "d"},
            {question: "Upon receiving an ombudsman's report, the legal unit should:", options: ["Dispute every finding", "File it away unseen", "Send it to the press", "Review the recommendations and advise on implementing lawful improvements"], answer: "d"},
            {question: "When reviewing a Memorandum of Understanding (MoU), the legal unit's key task is to determine if it:", options: ["Is printed on high-quality paper", "Uses the right font", "Is longer than ten pages", "Creates legally binding obligations or is merely a statement of intent"], answer: "d"},
            {question: "An employee receives a subpoena for official documents. Their first action should be to:", options: ["Destroy the documents", "Send the documents to the court directly", "Ignore it", "Immediately contact the legal unit for guidance"], answer: "d"},
            {question: "The legal unit would likely reject a sponsorship deal that requires the agency to:", options: ["Thank the sponsor", "Use the company's logo", "Hold an event", "Endorse a product, compromising the agency's independence and objectivity"], answer: "d"},
            {question: "A 'without prejudice' discussion is used to:", options: ["Promote prejudice", "Plan a lawsuit", "Exclude certain people", "Facilitate a frank settlement negotiation without the discussion being used in court"], answer: "d"},
            {question: "The legal unit manages its relationship with external counsel by:", options: ["Giving them unlimited authority", "Blindly paying all invoices", "Choosing the cheapest option without review", "Setting clear budgets, objectives, and reviewing their work product"], answer: "d"},
            {question: "When responding to a 'subject access request' for personal data, the legal unit ensures the response complies with:", options: ["The agency's convenience", "The speed of the printer", "Data protection law, including applicable exemptions", "The requester's tone", ], answer: "d"},
            {question: "On a project risk register, the legal unit is primarily responsible for identifying:", options: ["Technical failures", "Staffing shortages", "Marketing issues", "Legal, regulatory, and judicial review risks"], answer: "d"},
            {question: "A court is likely to find a decision unlawful if the agency failed to:", options: ["Maximize revenue", "Make a decision quickly", "Consult the legal unit after the fact", "Follow its own published procedures and principles of natural justice"], answer: "d"},
            {question: "A 'meaningful' public consultation is one where:", options: ["Many people attended", "It was held online", "No one complained", "The feedback is genuinely considered before a final decision is made"], answer: "d"},
            {question: "When facing a procurement challenge, the legal unit's role is to:", options: ["Concede immediately", "Pressure the evaluation team to change the outcome", "Blame the procurement officer", "Review the process for legality and prepare a robust defense"], answer: "d"},
            {question: "Advice that an appeal has a 'low chance of success' should be based on a:", options: ["Hunch", "Desire to avoid work", "Personal opinion of the judge", "Reasoned analysis of legal precedent and the strength of arguments"], answer: "d"},
            {question: "In a mediation, the legal unit's function is to:", options: ["Serve as the neutral mediator", "Make a binding decision", "Provide counseling", "Advise and represent the agency's interests in settlement talks"], answer: "d"},
            {question: "A 'legal hold' directive instructs employees to:", options: ["Stop all work on a project", "Delete old emails", "Work from home", "Preserve all documents and data related to a potential litigation"], answer: "d"},
            {question: "A 'deed of variation' is the appropriate instrument to:", options: ["Change a employee's duties", "Vary the landscape design", "Alter a law", "Formally amend an existing contract"], answer: "d"},
            {question: "The legal unit should vet a press release to prevent it from constituting:", options: ["Boring content", "A short message", "A use of jargon", "Libel, defamation, or a breach of confidentiality"], answer: "d"},
            {question: "The 'standstill period' in a procurement process is designed to:", options: ["Delay the award indefinitely", "Let the winner celebrate", "Give the procurement team a break", "Allow unsuccessful bidders to seek debriefing or challenge the decision before it is finalized"], answer: "d"},
            {question: "The legal unit's review of a policy affecting a vulnerable group must prioritize:", options: ["Cost savings", "Ease of implementation", "Political messaging", "Compliance with equality and non-discrimination legislation"], answer: "d"},
            {question: "An 'interagency agreement' is reviewed to ensure it clearly defines:", options: ["The meeting schedule", "Each party's roles, responsibilities, and financial liabilities", "The brand of coffee to be served", "The hierarchy between agencies"], answer: "b"},
            {question: "The 'separation of powers' doctrine requires the legal unit to ensure the executive agency does not:", options: ["Function effectively", "Usurp the constitutional powers of the legislature or judiciary", "Communicate with other branches", "Have its own legal advisor"], answer: "b"},
            {question: "The legal unit advocates for 'Plain Language' to:", options: ["Dumb down content", "Ensure clarity, reduce misunderstandings, and minimize legal disputes", "Satisfy a personal preference", "Make documents shorter"], answer: "b"},
            {question: "A 'value for money' assessment is legally important as it helps demonstrate that a procurement decision was:", options: ["Based on the lowest price only", "Rational, defensible, and based on defined criteria", "Made quickly", "Influenced by senior officials"], answer: "b"},
            {question: "The legal unit's role in a staff disciplinary process is to ensure it is:", options: ["Punitive", "Conducted fairly, in compliance with employment law and natural justice", "Kept secret", "Based on hearsay"], answer: "b"},
            {question: "The 'public interest test' in freedom of information weighs:", options: ["The applicant's identity", "The benefits of transparency against potential harms of disclosure", "The cost of retrieval", "The volume of documents"], answer: "b"},
            {question: "An 'ultra vires' decision is one that is:", options: ["Extremely wise", "Made beyond the legal power of the decision-maker", "Unpopular", "Very quickly made"], answer: "b"},
            {question: "The drafting of subsidiary legislation requires the legal unit to be:", options: ["Vague to allow flexibility", "Precise, clear, and strictly within the bounds of the parent Act", "As lengthy as possible", "Written for an academic audience"], answer: "b"},
            {question: "When a new international treaty is ratified, the legal unit advises on:", options: ["The diplomatic guest list", "Its domestic implementation and its effect on agency operations", "The design of the treaty document", "The travel arrangements"], answer: "b"},
            {question: "A 'lessons learned' review after litigation aims to:", options: ["Assign blame to individuals", "Improve future agency processes and decision-making to prevent recurrence", "Hide the outcome", "Justify the legal costs"], answer: "b"},
            {question: "A fundamental ethical duty of the legal unit is to maintain:", options: ["Absolute agency secrecy", "Professional independence and client confidentiality", "A large budget", "A strict hierarchy"], answer: "b"},
            {question: "The concept of 'accountability' is upheld by the legal unit by ensuring:", options: ["Decisions are made in secret", "Every decision has a lawful basis and can be justified to the public and courts", "Blame is always assigned to junior staff", "No records are kept"], answer: "b"},
            {question: "The legal unit's contribution to good governance is ultimately to ensure that government power is exercised:", options: ["Without constraint", "Lawfully, accountably, and for the public benefit", "Efficiently at all costs", "By the correct political party"], answer: "b"},
            {question: "A contractor claims they are owed additional payment for 'unforeseen ground conditions' on a public works project. The legal unit's first action should be to:", options: ["Authorize immediate payment to avoid delay", "Review the contract's force majeure and variation clauses to assess the claim's validity", "Terminate the contract for inconvenience", "Direct the project manager to negotiate verbally"], answer: "b"},
            {question: "During a negotiation, the other party's lawyer makes a settlement offer 'without prejudice.' This means the legal unit:", options: ["Must accept the offer immediately", "Can use the offer as evidence in court if negotiations fail", "Cannot use the offer as evidence in court if negotiations fail", "Should ignore the offer completely"], answer: "c"},
            {question: "The legal unit advises that a proposed administrative penalty is 'disproportionate.' To fix this, they would recommend:", options: ["Increasing the penalty to the maximum allowed", "Ensuring the penalty is appropriate to the severity of the violation", "Applying the same penalty to all offenses regardless of circumstances", "Canceling the penalty system entirely"], answer: "b"}




        ]; 

    shuffleArray(questions);
let currentQuestion = 0;
let score = 0;
let timer;
let timeRemaining = 2000;
let answers = new Array(questions.length).fill(null);

function displayQuestion(index) {
    currentQuestion = index;
    const questionText = document.getElementById("question-text");
    const optionsContainer = document.getElementById("options-container");
    
    questionText.textContent = `Question ${index + 1}: ${questions[index].question}`;
    optionsContainer.innerHTML = "";
    
    questions[index].options.forEach((option, i) => {
        const value = String.fromCharCode(97 + i);
        const input = document.createElement("input");
        input.type = "radio";
        input.name = "answer";
        input.value = value;
        input.id = `option${i + 1}`;
        
        // Check if this answer was previously selected
        if (answers[index] === value) {
            input.checked = true;
        }
        
        const label = document.createElement("label");
        label.htmlFor = `option${i + 1}`;
        label.textContent = `${String.fromCharCode(65 + i)}. ${option}`;
        
        optionsContainer.appendChild(input);
        optionsContainer.appendChild(label);
        optionsContainer.appendChild(document.createElement("br"));
    });

    // Update the question buttons to highlight the current question
    updateQuestionButtons();
}

function createQuestionButtons() {
    const buttonsContainer = document.getElementById('question-buttons');
    buttonsContainer.innerHTML = '';
    
    questions.forEach((_, index) => {
        const button = document.createElement('button');
        button.className = 'question-btn';
        button.textContent = index + 1;
        button.onclick = () => navigateToQuestion(index);
        buttonsContainer.appendChild(button);
    });
    
    updateQuestionButtons();
}

function updateQuestionButtons() {
        const buttons = document.querySelectorAll('.question-btn');
        
        buttons.forEach((button, index) => {
            // Reset all button classes
            button.className = 'question-btn';
            
            // Highlight current question
            if (index === currentQuestion) {
                button.classList.add('current');
            }
            
            // Mark answered questions
            if (answers[index] !== null) {
                if (answers[index] === questions[index].answer) {
                    button.classList.add('answered-correct');
                } else {
                    button.classList.add('answered-wrong');
                }
            }
        });
    }

function navigateToQuestion(index) {
    checkAnswer();
    displayQuestion(index);
}

function startTimer() {
    timer = setInterval(() => {
        if (timeRemaining > 0) {
            timeRemaining--;
            const minutes = Math.floor(timeRemaining / 60).toString().padStart(2, '0');
            const seconds = (timeRemaining % 60).toString().padStart(2, '0');
            document.getElementById("timer").textContent = `Time Remaining: ${minutes}:${seconds}`;
        } else {
            clearInterval(timer);
            submitExam();
        }
    }, 1000);
}

function nextQuestion() {
    checkAnswer();
    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        displayQuestion(currentQuestion);
    } else {
        alert("You are on the last question.");
    }
}

function previousQuestion() {
    if (currentQuestion > 0) {
        currentQuestion--;
        displayQuestion(currentQuestion);
    } else {
        alert("You are on the first question.");
    }
}

function checkAnswer() {
    const selectedOption = document.querySelector("input[name='answer']:checked");
    if (selectedOption) {
        answers[currentQuestion] = selectedOption.value;
        score = answers.reduce((total, answer, idx) => {
            return answer === questions[idx].answer ? total + 1 : total;
        }, 0);
        
        // Update the question buttons to reflect the answered question
        updateQuestionButtons();
    }
}

function submitExam() {
    clearInterval(timer);
    checkAnswer();
    
    const percentage = ((score / questions.length) * 100).toFixed(1);
    const popup = document.getElementById("score-popup");
    const overlay = document.getElementById("overlay");
    
    document.getElementById("total-questions").textContent = questions.length;
    document.getElementById("correct-answers").textContent = score;
    document.getElementById("percentage").textContent = `${percentage}%`;
    
    const resultMessage = document.getElementById("result-message");
    resultMessage.className = percentage >= 70 ? "result-message pass" : "result-message fail";
    resultMessage.textContent = percentage >= 70 ? 
        "🎉 Congratulations! You passed!" : 
        "❌ You need more practice. Try again!";

        const failedList = document.getElementById('failed-questions-list');
            failedList.innerHTML = '';
            
            const failedQuestions = answers.reduce((acc, answer, index) => {
                if (answer !== questions[index].answer) {
                    acc.push({
                        question: questions[index].question,
                        number: index + 1,
                        correctAnswer: questions[index].answer.toUpperCase()
                    });
                }
                return acc;
            }, []);

            if (failedQuestions.length > 0) {
                failedQuestions.forEach(q => {
                    const li = document.createElement('li');
                    li.textContent = `Question ${q.number}: ${q.question} (Correct Answer: ${q.correctAnswer})`;
                    failedList.appendChild(li);
                });
            } else {
                const li = document.createElement('li');
                li.textContent = 'All questions answered correctly!';
                li.classList.add('no-failed');
                failedList.appendChild(li);
            }
    
    popup.style.display = "block";
    overlay.style.display = "block";
    
    // Close pop-up handler
    document.getElementById("close-popup").onclick = function() {
        popup.style.display = "none";
        overlay.style.display = "none";
    };
};

window.onload = function() {
    createQuestionButtons();
    displayQuestion(currentQuestion);
    startTimer();
};
</script>

</body>
</html>
